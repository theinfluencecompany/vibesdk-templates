[
  {
    "name": "tic-next-game-runner",
    "language": "typescript",
    "frameworks": [
      "canvas",
      "less",
      "next",
      "react"
    ],
    "projectType": "app",
    "disabled": false,
    "description": {
      "selection": "# Template Selection — TIC Next.js Game Runner\n\n## Use this template when:\n\n- Building **mobile-first mini-games** for web/WebView\n- Need **Phaser** (2D) or **React Three Fiber** (3D) game engines\n- Want **AI-powered asset generation** (images, 3D models, music, SFX, voiceovers via fal.ai)\n- Building **highly shareable games** with score cards, challenge codes, or clips\n- Need **native-like mobile experience** with pinch/pan/rotate gestures\n- Target **embedded WebView** in native apps (full-screen, safe-area aware)\n- Want **fast time-to-fun** games (10-60 second sessions)\n- Building games with **Gemini AI orchestration** and skills\n\n## Avoid this template when:\n\n- Building non-game applications (dashboards, forms, content sites)\n- Don't need game engines or physics\n- Building static marketing sites or SEO-heavy landing pages\n- Need server-side rendering for all pages (this uses App Router but focuses on client-side game logic)\n- Don't want Next.js (prefer simpler Vite templates instead)\n\n## Key Features:\n\n- **Next.js 15** with App Router\n- **Phaser 3** for 2D games (on-demand loaded)\n- **React Three Fiber + Drei** for 3D games (on-demand loaded)\n- **Cloudflare deployment** via @opennextjs/cloudflare\n- **fal.ai integration** for AI asset generation (images, 3D, audio, video)\n- **Mobile-first gestures** (pinch, pan, rotate) with proper touch handling\n- **Native-like UX** (full-bleed canvas, safe-area HUD, no accidental zoom)\n- **Gemini AI skills** for game orchestration and procedural generation\n- **Minimal bundle** by default (engines load on-demand)\n- **Toast notifications** (Sonner)\n- **Theme support** (next-themes)\n\n## Mental Model:\n\nThink of this as a **mobile mini-game sandbox** where:\n- The entire app is a single-game experience (enters at `/`)\n- Game engines are loaded on-demand to keep initial bundle small\n- Mobile gestures work like native apps (no browser zoom interference)\n- AI can generate game assets procedurally with cost controls\n- Share triggers are built-in (score cards, clips, challenge codes)\n\n## Tech Stack:\n\n- **Runtime**: Next.js 15 + React 19 + TypeScript\n- **2D Engine**: Phaser 3 (client-side, dynamically imported)\n- **3D Engine**: Three.js + React Three Fiber + Drei (client-side, dynamically imported)\n- **Physics**: Rapier 3D, Cannon.js (optional, for physics-based games)\n- **AI Assets**: fal.ai SDK (images, 3D, audio, video generation)\n- **Deployment**: Cloudflare Workers via @opennextjs/cloudflare\n- **UI**: Tailwind CSS + Radix UI primitives + Sonner toasts\n- **Forms**: React Hook Form + Zod validation\n- **State**: Zustand (lightweight state management)",
      "usage": "# Usage Guide — TIC Next.js Game Runner\n\n## Overview\n\nThis is a **mobile-first, single-game sandbox** template for building shareable mini-games on Cloudflare.\n\n- **Entry point**: `/` (src/app/page.tsx)\n- **Touch-first**: Canvas-ready defaults with pinch/pan/rotate gestures\n- **Native-like UX**: WebView-friendly full-screen shell + safe-area helpers\n- **AI assets**: fal.ai integration for procedural asset generation\n- **Game engines**: Phaser (2D) and React Three Fiber (3D), loaded on-demand\n\n## Quick Start\n\n```bash\n# Install dependencies\nbun install\n\n# Start development server\nbun dev\n\n# Build for production\nbun run build\n\n# Deploy to Cloudflare\nbun run deploy\n```\n\nOpen `http://localhost:3000` to see your game sandbox.\n\n## Project Structure\n\n```\nsrc/\n├── app/\n│   ├── page.tsx           # Main game entry point\n│   ├── layout.tsx         # Root layout with theme provider\n│   └── globals.css        # Global styles + game-surface classes\n├── components/\n│   ├── game/\n│   │   ├── phaser-game.tsx      # Phaser 2D example\n│   │   ├── r3f-canvas.tsx       # React Three Fiber 3D example\n│   │   └── mobile-game-shell.tsx # Full-screen game container\n│   └── ui/                # Radix UI components (Shadcn)\n├── lib/\n│   ├── fal-client.ts      # fal.ai SDK wrapper\n│   ├── native-share.ts    # Native share API helper\n│   ├── gestures/          # Pinch/pan/rotate gesture handlers\n│   └── game-dsl/          # Game Definition Schema Language\n└── env.ts                 # Typed environment variables (T3 Env)\n```\n\n## Core Concepts\n\n### 1. Single-Game Sandbox\n\n- The app **always enters at `/`** and the game lives there\n- Implement your mini-game in `src/app/page.tsx`\n- Keep `/` runnable at all times; it should feel like a native mini app\n\n### 2. Mobile-First Design\n\n- **One-thumb controls** (tap/hold/swipe) by default\n- **Readable UI** at small sizes; avoid tiny text\n- **Fast loading**: minimal bundles, small textures, simple shaders\n- **Touch gestures**: Use `.game-surface` class and gesture helpers\n- **Safe areas**: UI respects notches/home indicators via `.safe-area-pad`\n\n### 3. Game Engines (On-Demand)\n\n#### Phaser (2D Games)\n\n```tsx\n// src/app/page.tsx\nimport dynamic from 'next/dynamic';\n\nconst PhaserGame = dynamic(\n  () => import('@/components/game/phaser-game'),\n  { ssr: false }\n);\n\nexport default function GamePage() {\n  return <PhaserGame />;\n}\n```\n\n**Phaser Best Practices:**\n- Always use `\"use client\"` for Phaser components\n- Dynamically import Phaser inside `useEffect()` to avoid SSR\n- Use stable logical resolution (e.g., 360×640) with contain/letterbox scaling\n- Clamp DPR for performance: `Math.min(window.devicePixelRatio ?? 1, 2)`\n- Clean up on unmount: `game.destroy(true)`\n\n#### React Three Fiber (3D Games)\n\n```tsx\n// src/app/page.tsx\nimport dynamic from 'next/dynamic';\n\nconst R3FCanvas = dynamic(\n  () => import('@/components/game/r3f-canvas'),\n  { ssr: false }\n);\n\nexport default function GamePage() {\n  return <R3FCanvas />;\n}\n```\n\n**R3F Best Practices:**\n- Keep Three.js imports client-side only\n- Clamp DPR: `dpr={[1, 2]}` to prevent over-rendering\n- Use `frameloop=\"demand\"` for mostly-static scenes\n- Avoid OrbitControls by default on mobile; use fixed camera\n- Keep geometry/materials simple; avoid heavy postprocessing\n\n### 4. Native-Like Gestures\n\n```tsx\nimport { usePinchPanGesture } from '@/lib/gestures/use-pinch-pan-gesture';\n\nfunction MyGame() {\n  const containerRef = useRef<HTMLDivElement>(null);\n  \n  usePinchPanGesture(containerRef, {\n    onPinch: ({ scale }) => {\n      // Handle pinch-to-zoom\n    },\n    onPan: ({ deltaX, deltaY }) => {\n      // Handle pan/drag\n    },\n    onRotate: ({ angle }) => {\n      // Handle rotation\n    }\n  });\n\n  return (\n    <div ref={containerRef} className=\"game-surface\">\n      {/* Your game canvas */}\n    </div>\n  );\n}\n```\n\n**Key Points:**\n- Wrap canvas with `.game-surface` class to prevent browser zoom\n- Use `usePinchPanGesture` hook or `attachPinchPanGesture` for custom gestures\n- Browser pinch-zoom is disabled by default (viewport meta tag)\n- Touch coordinates are client coords; convert using canvas bounds\n\n### 5. AI Asset Generation (fal.ai)\n\n```tsx\nimport { generateImage, generateMusic } from '@/lib/fal-client';\n\n// Generate an image\nconst imageUrl = await generateImage({\n  prompt: 'pixel art spaceship',\n  model: 'fal-ai/fast-sdxl',\n});\n\n// Generate background music\nconst audioUrl = await generateMusic({\n  prompt: 'upbeat 8-bit game music',\n  duration: 30,\n});\n```\n\n**Cost Control:**\n- **Default: zero external API calls** unless explicitly requested\n- **Max 3 external asset calls per game** (configurable)\n- Prefer SVG, canvas primitives, procedural assets\n- Cache results and reuse across variants\n\n### 6. Full-Screen Game Shell\n\n```tsx\nimport { MobileGameShell } from '@/components/game/mobile-game-shell';\n\nexport default function GamePage() {\n  return (\n    <MobileGameShell\n      hud={\n        <div className=\"flex justify-between items-start p-4\">\n          <div>Score: 100</div>\n          <button>Pause</button>\n        </div>\n      }\n    >\n      <canvas ref={canvasRef} className=\"w-full h-full\" />\n    </MobileGameShell>\n  );\n}\n```\n\n**Features:**\n- Full-bleed game surface (under notches)\n- Safe-area padded HUD overlay\n- Pointer-events-none by default on HUD (game receives all touches)\n- Prevents outer scrolling\n\n## Environment Variables\n\n```bash\n# .dev.vars\nFAL_KEY=your-fal-api-key  # Required for AI asset generation\n```\n\nUses **T3 Env** (`src/env.ts`) for typed environment access.\n\n## Styling Guidelines\n\n- **Game surface**: Use `.game-surface` class for canvas containers\n- **Safe areas**: Use `.safe-area-pad` for HUD elements\n- **Full-bleed**: Use `100dvh/100dvw` + `viewport-fit=cover`\n- **Fonts**: Use `next/font/google` for self-hosted fonts (performance)\n- **Tailwind**: Use utility classes; avoid inline styles\n\n## Audio Best Practices\n\n- Start **muted** by default with in-game toggle\n- Only start audio **after user gesture** (tap)\n- Use **Phaser built-in audio** for Phaser games\n- Use **Howler.js** for standalone audio needs\n- Keep assets tiny: short SFX, low sample rate\n- Prefer **procedural SFX** (oscillator) over large files\n\n## WebView / Embedded Constraints\n\n- Runs inside **native app WebView** (not full browser)\n- **Fixed root shell**: `100dvh/100dvw` + no outer scrolling\n- Disable text selection by default (except inputs)\n- Keep navigation self-contained (avoid opening new tabs)\n- Respect safe areas: `env(safe-area-inset-*)`\n\n## Deployment\n\n```bash\n# Build and deploy to Cloudflare\nbun run deploy\n\n# Or build and preview locally\nbun run preview\n```\n\nUses **@opennextjs/cloudflare** to compile Next.js to Cloudflare Workers.\n\n## Gemini AI Skills\n\nLocated in `.gemini/skills/`:\n- `mini-game-orchestrator`: End-to-end game generation (concept → GDD → implementation)\n- `assets/fal-*-generator`: AI asset generation skills (image, 3D, music, SFX, video, voiceover)\n\nSee `GEMINI.md` for full AI orchestration guidelines.\n\n## Important Rules\n\n### ✅ Do:\n- Build mobile-first with touch controls\n- Load game engines on-demand (dynamic imports)\n- Use provided gesture helpers for native-like feel\n- Respect safe areas for HUD/UI\n- Keep initial bundle small\n- Cache and reuse AI-generated assets\n\n### ❌ Don't:\n- Import Phaser/Three.js from shared/always-loaded modules\n- Use global touch-action: none (only on `.game-surface`)\n- Rely on hover or precise mouse interactions\n- Generate many AI assets without user approval\n- Use heavy postprocessing or large textures by default\n- Forget to clean up game instances on unmount\n\n## Examples in Template\n\n- **Phaser**: `src/components/game/phaser-game.tsx`\n- **R3F**: `src/components/game/r3f-canvas.tsx`\n- **Gestures**: `src/lib/gestures/use-pinch-pan-gesture.ts`\n- **Game Shell**: `src/components/game/mobile-game-shell.tsx`\n\nCopy and customize these as starting points for your games!"
    }
  }
]